<section class="pub-list-page">
  <!-- ‚úÖ Compact header using your existing signals -->
  <header class="page-header">
    <h1>Spoons ({{ pubStore.totalCount() }})</h1>
    <p class="page-subtitle">
      @if (hasLocationData()) {
        üìç Sorted by proximity
      } @else {
        üìÑ Sorted alphabetically
      }
    </p>
  </header>

  <!-- ‚úÖ Condensed controls using your exact signal structure -->
  <section class="controls-section">
    <div class="search-group">
      <input
        type="search"
        class="search-input"
        placeholder="Search pubs by name or location..."
        [value]="searchTerm()"
        (input)="setSearchTerm($event)"
        autocomplete="off"
      />
      @if (searchTerm()) {
        <button class="clear-search-btn" (click)="clearSearch()" type="button">
          ‚úï
        </button>
      }
    </div>

    <div class="filter-group">
      <div class="filter-pills">
        @for (option of filterOptions; track option.value) {
          <button
            class="filter-pill"
            [class.active]="filterMode() === option.value"
            (click)="setFilter(option.value)"
            type="button"
          >
            {{ option.label }} ({{ getFilterCount(option.value) }})
          </button>
        }
      </div>

    </div>
  </section>

  <!-- ‚úÖ Main content area with better space usage -->
  <section class="pub-list-container">
    @if (pubStore.loading()) {
      <app-loading-state text="Loading pubs..." />
    } @else if (pubStore.error()) {
      <app-error-state 
        [message]="pubStore.error()!"
        [showRetry]="true"
        retryText="Try Again"
        (retry)="retryLoad()"
      />
    } @else if (filteredPubs().length === 0) {
      <app-empty-state 
        icon="üç∫"
        title="No pubs found"
        subtitle="Try adjusting your search or filters."
        [showAction]="true"
        actionText="Clear Filters"
        (action)="resetFilters()"
      />
    } @else {
      <div class="pub-grid">
        @for (pub of filteredPubs(); track pub.id) {
          <a
            [routerLink]="['/pubs', pub.id]"
            class="pub-card-link"
            [attr.aria-label]="'View details for ' + pub.name"
          >
            <app-pub-card
              [pub]="pub"
              [hasCheckedIn]="dataAggregatorService.hasVisitedPub(pub.id)"
              [checkinCount]="dataAggregatorService.getVisitCountForPub(pub.id)"
              [showCheckinCount]="dataAggregatorService.hasVisitedPub(pub.id)"
              [isLocalPub]="dataAggregatorService.isLocalPub(pub.id)"
            />
          </a>
        }
      </div>
    }
  </section>
</section>
