<div class="site-header" #headerRef>
  <!-- TODO: Extract this to UI ? -->

  <div class="debug-header">
    <pre>User: {{ user() | json }}</pre>
    <pre>Short Name: {{ shortName() }}</pre>
    <pre>Is Anonymous: {{ isAnonymous() }}</pre>
  </div>

    <app-user-info
    [user]="user"
    [isAnonymous]="isAnonymous"
    [shortName]="shortName()"
    [onLogin]="handleLogin"
    [onLogout]="handleLogout"
  />

  <ng-container *ngIf="!isHomepage(); else titleWithoutLink">
    <a routerLink="/" class="header__title">
      <h1>Spooncount</h1>
    </a>
  </ng-container>
  <ng-template #titleWithoutLink>
    <h1 class="header__title">Spooncount</h1>
  </ng-template>



  <nav class="main-nav" [class.nav-mobile]="isMobile()">
    <app-nav *ngIf="!isMobile()" />

    <div class="main-nav__actions">
      <button
        *ngIf="'theme' | featureFlag"
        #panelTrigger
        aria-expanded="true"
        (click)="onTogglePanel('theme')"
        class="theme-link"
      >
        ğŸ¨ Theme
      </button>

      <button
        *ngIf="'search' | featureFlag"
        #panelTrigger
        aria-expanded="true"
        (click)="onTogglePanel('search')"
        class="search-link"
      >
        ğŸ” Search
      </button>
    </div>

    <button
      *ngIf="isMobile()"
      #panelTrigger
      aria-expanded="true"
      (click)="onTogglePanel('nav')"
      class="nav-link"
    >
    <span class="material-symbols-outlined">menu</span>
    <span>Menu</span>
    </button>
  </nav>
</div>
