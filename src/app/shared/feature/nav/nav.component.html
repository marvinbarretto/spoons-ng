<div class="nav-container">
  <!-- Movement Status Indicator - Mobile Only -->
  @if (isMobile$$()) {
    <div class="movement-status">
      @if (loading()) {
        <app-chip-status 
          type="loading"
          icon="üìç"
          [showIcon]="true"
          [text]="''"
          size="xs"
          tooltip="Getting location..."
          [animated]="true"
        />
      } @else if (isMoving()) {
        <app-chip-status 
          type="warning"
          icon="üî¥"
          [showIcon]="true"
          [text]="''"
          size="xs"
          [tooltip]="'Moving detected! (' + movementSpeed().toFixed(1) + ' m/s)'"
        />
      } @else if (isTracking()) {
        <app-chip-status 
          type="success"
          icon="üü¢"
          [showIcon]="true"
          [text]="''"
          size="xs"
          tooltip="Stationary - tracking location"
        />
      } @else {
        <app-chip-status 
          type="inactive"
          icon="‚ö´"
          [showIcon]="true"
          [text]="''"
          size="xs"
          tooltip="Location tracking inactive"
        />
      }
      
      <!-- Debug controls (temporary) -->
      @if (!isTracking()) {
        <button class="movement-btn" (click)="startMovementDetection()" title="Start movement detection">‚ñ∂Ô∏è</button>
      } @else {
        <button class="movement-btn" (click)="stopMovementDetection()" title="Stop movement detection">‚è∏Ô∏è</button>
      }
    </div>
  }

  <ul
    class="menu__list"
    [class.mobile]="isMobile$$()"
    [class.desktop]="!isMobile$$()"
  >
    <!-- Auth Links - Show only when no user exists (before guest/login choice) -->
    @if (!user()) {
      <li routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
        <a routerLink="/login">Login</a>
      </li>
      <li routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
        <a routerLink="/register">Register</a>
      </li>
    }

    <!-- Main Navigation - Show for all users -->
    <li routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
      <a routerLink="/">Home</a>
    </li>

    <li routerLinkActive="active" [routerLinkActiveOptions]="{ exact: false }">
      <a routerLink="/pubs">Pubs</a>
    </li>

    <li routerLinkActive="active" [routerLinkActiveOptions]="{ exact: false }">
      <a routerLink="/missions">Missions</a>
    </li>

    <li routerLinkActive="active" [routerLinkActiveOptions]="{ exact: false }">
      <a routerLink="/admin/badges">Badges</a>
    </li>

    <li routerLinkActive="active" [routerLinkActiveOptions]="{ exact: false }">
      <a routerLink="/admin">Admin</a>
    </li>

    <li routerLinkActive="active" [routerLinkActiveOptions]="{ exact: false }">
      <a routerLink="/leaderboard">Leaderboard</a>
    </li>

    <li routerLinkActive="active" [routerLinkActiveOptions]="{ exact: false }">
      <a routerLink="/new-leaderboard">New Leaderboard</a>
    </li>

    <li routerLinkActive="active" [routerLinkActiveOptions]="{ exact: false }">
      <a routerLink="/share">Share</a>
    </li>
  </ul>
</div>
