<section class="user-info">

  @if (user()?.isAnonymous) {

    <div class="user-info__anon">
      <img
        class="anon-avatar"
        src="assets/images/npc-wojack-shaky.webp"
        alt="Anonymous NPC"
        width="48"
        height="48"
      />
      <div class="user-details">
        <p class="user-name" [title]="'Anonymous: ' + user()?.uid">
          {{ userDisplayName() }}
        </p>
        <small class="user-type">You're playing as:</small>
      </div>
    </div>

    <!-- User Controls for Anonymous Users -->
    <div class="user-controls">
      <app-button
        [variant]="'ghost'"
        [size]="'sm'"
        (onClick)="changeUsername()"
      >
        Change Username
      </app-button>

      <app-button
        [variant]="'ghost'"
        [size]="'sm'"
        (onClick)="chooseAvatar()"
      >
        Choose Avatar
      </app-button>
    </div>

    <!-- Login Option -->
    <div class="login-section">
      <app-button
        [variant]="'primary'"
        [size]="'sm'"
        (onClick)="loginWithGoogle()"
      >
        Login with Google
      </app-button>
    </div>

  } @else {
    <!-- Authenticated User -->
    <div class="user-info__user">
      <img
        *ngIf="user()?.photoURL"
        [src]="user()?.photoURL"
        alt="User avatar"
        width="32"
        height="32"
      />
      <div class="user-details">
        <p class="user-name">{{ userDisplayName() }}</p>
        <small class="user-type">Logged In</small>
      </div>
    </div>

    <app-button
      [variant]="'ghost'"
      [size]="'sm'"
      (onClick)="logout()"
    >
      Logout
    </app-button>
  }
</section>
